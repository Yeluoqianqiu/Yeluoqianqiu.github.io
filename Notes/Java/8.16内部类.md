在Java中，允许一个类的定义位于另一个类的内部，前者称为**内部类**，后者称为**外部类**。

Inner class一般用在定义它的类或语句块之内，在外部引用它时必须给出完整的名称。 Inner class的名字不能与包含它的外部类类名相同；

应用场景：当一个事物的内部，还有一个部分需要一个完整的结构进行描述，而这个内部的完整的结构又只为外部事物提供服务，那么整个内部的完整结构最好使用内部类。如链表的结点类。

## 内部类的分类

### 成员内部类（static成员内部类和非static成员内部类）

- 一方面，作为外部类的成员：
  -   - 可以调用外部类的属性和方法
  -   - 可以被static修饰，可以有private/(default)/protected/public四种权限修饰符
- 另一方面，作为一个类：
  -   - 类中可以定义属性、方法、构造器等
  -   - 可以被final修饰，表示此内部类不能被继承
  -   - 可以被abstract修饰，表示此内部类不能被实例化
  -   - 编译以后生成OuterClass$InnerClass.class字节码文件(也适用于局部内部类)
- 注：
  -   - 非static的成员内部类中的成员不能声明为static的。
  -   - 外部类访问成员内部类的成员，需要“内部类.成员”或“内部类对象.成员”的方式
  -   - 成员内部类可以直接使用外部类的所有成员，包括私有的数据
  -   - 想要在外部类的静态成员部分使用内部类时，可以考虑内部类声明为静态的

```java
public class Outer{
    private int s = 111;
    public class Inner{
        private int s = 222;
        public void mb(int s){
            System.out.println(s);//局部变量s
            System.out.println(this.s);//内部类对象的属性s
            System.out.println(Outer.this.s);//外部类对象属性s
        }
    }
    public static void main(String[] args){
        Outer a = new Outer();
        Outer.Inner b = a.new Inner();
        b.mb(333);
    }
}
```

### 局部内部类（方法、代码块、构造器内）

```java
class 外部类{
    方法(){
        class 局部内部类{}
    }
  
    {
        class 局部内部类{}
    }
}
```

注：

- 局部内部类只能在声明它的方法或代码块中使用，而且是先声明后使用。除此之外的任何地方都不能使用该类
- 但是它的对象可以通过所在方法的返回值返回使用，返回值类型只能是局部内部类的父类或父接口类型
- 局部内部类可以使用外部类的成员，包括私有的
- 局部内部类可以使用所在方法的局部变量，但必须是final的。由局部内部类和局部变量的生命周期不同所致。(jdk7及之前，要求显式定义为final，jdk8之后不用显式定义。)
- 局部内部类与局部变量的地位类似，不能使用public/default/protected/private修饰
- 局部内部类不能使用static修饰，因此不能包含静态成员。

### 匿名内部类

匿名内部类不能定义任何静态成员、方法和类，只能创建匿名内部类的一个实例。一个匿名内部类一定是在new的后面，用其隐含实现一个接口或实现一个类

格式：

```java
new 父类构造器（实参列表）|实现接口(){ 
    //匿名内部类的类体部分
}
```

特点：

- 必须继承父类或实现接口
- 只能有一个对象，且该对象只能以多态形式被引用

一个类的内部类一般放在开头。

内部类在开发中使用的不多。