所谓类的单例设计模式，就是采取一定的方法保证在整个的软件系统中，对某个类**只能存在一个对象实例** 。

单例模式的优点： 由于单例模式只生成一个实例，减少了系统性能开销，当一个对象的产生需要比较多的资源时(如读取配置、产生其他依赖对象)，则可以通过在应用启动时直接产生一个单例对象，然后永久驻留内存的方式来解决。如java.lang.Runtime

单例设计模式的应用场景：

* **网站的计数器** ，一般也是单例模式实现，否则难以同步。
* **应用程序的日志应用** ，一般都使用单例模式实现，这一般是由于共享的日志文件一直处于打开状态，因为只能有一个实例去操作，否则内容不好追加。
* **数据库连接池** 的设计一般也是采用单例模式，因为数据库连接是一种数据库资源。
* 项目中，**读取配置文件的类** ，一般也只有一个对象。没有必要每次使用配置文件数据，都生成一个对象去读取。
* Application 也是单例的典型应用
* Windows的**Task Manager** (任务管理器)就是很典型的单例模式
* Windows的**Recycle Bin** (回收站)也是典型的单例应用。在整个系统运行过程 中，回收站一直维护着仅有的一个实例。

设计一个单例类，我们首先必须**将类的构造器的访问权限设置为private** ，这样，在该类的外部就不能用new创建新实例。在类的内部定义一个静态变量，指向该单例对象，**并对外提供一个取得该单例的静态方法** 。

总结来说：

* 私有构造器
* 静态instance
* 静态getInstance()方法

### 饿汉式

```
class Singleton{
    //1.私有化构造器
    private Singleton(){
}
    //2.内部提供要给当前类的实例，此实例必须静态
    private static Singleton instance = new Singleton();
    //也可用public static Singleton single = new Singleton();就不用getInstance()方法了。
  
    //3.提供公共的静态方法，返回当前类的对象
    public static Singleton getInstance(){
        return instance;
    }
}
```

### 懒汉式

线程安全的懒汉式：创建单例时应加锁

```
class Singleton{
    private static Singleton instance = null;
    private Singleton(){}
    public static Singleton getInstance(){
        if(instance == null){
            synchronized(Singleton.class){
                if(instance == null){
                    instance = new Singleton();
                }
            }
        }
        return instance;
    }
}
```

> 懒汉式由于需要时才创建对象，延迟了对象的创建，比饿汉式更具优点。但饿汉式天生线程安全，懒汉式需要加锁来保证线程安全。
>

### 推荐写法

```
public class Singleton {
    private Singleton() { }

    private static class SingletonHolder {
        private static final Singleton INSTANCE = new Singleton();
    }

    public static Singleton getInstance() {
        return SingletonHolder.INSTANCE;
    }
}
```