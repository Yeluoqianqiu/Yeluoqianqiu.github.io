## MySQL数据类型

常用的数据类型有：

- 整型（xxxint）
- 位类型(bit)
- 浮点型（float和double、real）
- 定点数（decimal,numeric）
- 日期时间类型（date,time,datetime,year）
- 字符串（char,varchar,xxxtext）
- 二进制数据（xxxBlob、xxbinary）
- 枚举（enum）
- 集合（set）

### 1、整型（xxxint）

|  整数类型  | 字节 |             signed             |        unsigned        |
| :---------: | :--: | :-----------------------------: | :--------------------: |
|   TINYINT   |  1  |            -128~127            |         0~255         |
|  SMALLINT  |  2  |                                |                        |
|  MEDIUMINT  |  3  |                                |                        |
| INT/INTEGER |  4  |   -a ~ a-1    a = 2147483648   |    0 ～ 4294967295    |
|   BIGINT   |  8  | -a~a-1    a=9223372036854775808 | 0~18446744073709551615 |

> 一般只用得到int和bigint。
>
> mysql没有布尔型，可使用tinyint(1)构造。
>

整数列的可选属性有三个：如`int[(m)][unsigned][zerofill]`

- M: 宽度(在0填充的时候才有意义，否则不需要指定) 如 id int(8) zerofill unsigned。输入1 保存为00000001
- unsigned: 无符号类型(非负)
- zerofill: 0填充,(如果某列是zerofill，那么默认就是无符号)，如果指定了zerofill只是表示不够M位时，用0在左边填充，如果超过M位，只要不超过数据存储范围即可

> 在 int(M) 中，M 的值跟 int(M) 所占多少存储空间并无任何关系。 int(3)、int(4)、int(8) 在磁盘上都是占用 4 bytes 的存储空间。
>

### 2、浮点型

| `float[(m,d)][unsigned][zerofill]`  | 单精度浮点数，m是数字总个数，d是小数位数 |
| ----------------------------------- | ---------------------------------------- |
| `double[(m,d)][unsigned][zerofill]` | 双精度浮点数，m是数字总个数，d是小数位数 |

单精度值使用4个字节，双精度值使用8个字节

### 3、定点型

`decimal[(m,d)][unsigned] [zerofill]`    十进制小数，内部用字符串实现，避免了float/double在高精度时不准确的问题

- NUMERIC等价于DECIMAL。

### 4、日期时间类型

| DATE      | YYYY-MM-DD（1000-01-01/9999-12-31）                                    |
| --------- | ---------------------------------------------------------------------- |
| TIME      | HH:MM:SS（'-838:59:59'/'838:59:59'）                                   |
| YEAR      | YYYY（1901/2155）                                                      |
| DATETIME  | 8字节。YYYY-MM-DD  HH:MM:SS（1000-01-01 00:00:00/9999-12-31 23:59:59） |
| TIMESTAMP | 4字节。YYYYMMDD  HHMMSS（1970-01-01 00:00:00/2037 年某时）             |

timestamp和datetime的区别：

- timestamp：与UNIX时间戳相同，底层使用毫秒表示，**区分时区**，同一个时间戳，在不同的时区所代表的具体时间不同。
- datetime是用日期和时分秒表示，精度为秒，**不区分时区**
- 应该优先使用timestamp：
  -   - 因为datetime虽然直观，但不便于计算；
  -   - timestamp和时区有关，便于本地化；
  -   - 如果插入NULL，timestamp会自动设置为当前系统时间；
  -   - timestamp占用空间较小。

### 5、字符串型

Mysql中没有字符类型，只有字符串类型：char,varchar,text都是字符串类型

| char(m)    | 定长字符串，m为字符串长度，m最大值为255           |
| ---------- | ------------------------------------------------- |
| varchar(m) | 变长字符串，m为最大允许字符串长度，m最大值为65535 |
| text       | 文本串，最多存储65535(2**16  - 1)个字符           |

> varchar比起char节省空间，但是从性能上，char数据类型的处理速度更快，同时要用到char和varchar时，推荐把数据类型为char的列放在数据类型为varchar的列前面。
>
> 在进行存储和检索时，会保留 VARCHAR 末尾的空格，而会删除 CHAR 末尾的空格。
>

### 6、位类型（了解）

BIT数据类型可用来保存位字段值。BIT(M)类型允许存储M位值。M范围为1~64，默认为1。

BIT其实就是存入二进制的值，类似010110。如果存入一个BIT类型的值，位数少于M值，则左补0。如果存入一个BIT类型的值，位数多于M值，MySQL的操作取决于此时有效的SQL模式：如果模式未设置，MySQL将值裁剪到范围的相应端点，并保存裁减好的值。如果模式设置为traditional(“严格模式”)，超出范围的值将被拒绝并提示错误，并且根据SQL标准插入会失败。

对于位字段，直接使用SELECT命令将不会看到结果，可以用bin()或hex()函数进行读取。

### 7、二进制值类型（了解）

可以存储小头像、二维码

包括：xxxBLOB和xxxBINARY

BINARY和VARBINARY类型类似于CHAR和VARCHAR类型，但是不同的是，它们存储的不是字符字符串，而是二进制串。所以它们没有字符集，并且排序和比较基于列值字节的数值值。当保存BINARY(M)值时，在它们右边填充0x00(零字节)值以达到指定长度。取值时不删除尾部的字节。比较时所有字节很重要（因为空格和0x00是不同的，0x00<空格），包括ORDER BY和DISTINCT操作。比如插入'a '会变成'a \0'。

BLOB是一个二进制大对象，可以容纳可变数量的数据。有4种BLOB类型：TINYBLOB、BLOB、MEDIUMBLOB和LONGBLOB。它们只是可容纳值的最大长度不同。分别与四种TEXT类型：TINYTEXT、TEXT、MEDIUMTEXT和LONGTEXT对应有相同的最大长度和存储需求。在TEXT或BLOB列的存储或检索过程中，不存在大小写转换。BLOB和TEXT列不能有默认值。BLOB或TEXT对象的最大大小由其类型确定，但在客户端和服务器之间实际可以传递的最大值由可用内存数量和通信缓存区大小确定。你可以通过更改max_allowed_packet变量的值更改消息缓存区的大小，但必须同时修改服务器和客户端程序。

### 8、枚举（ENUM）（了解）

enum举例：

```mysql
CREATE TABLE shirts (
    name VARCHAR(40),
    size ENUM('x-small', 'small', 'medium', 'large', 'x-large')
    );
INSERT INTO shirts (name, size) VALUES ('dress shirt','large'), ('t-shirt','medium'),('polo shirt','small');
```

set举例：

```mysql
CREATE TABLE myset (col SET('a', 'b', 'c', 'd'));
INSERT INTO myset (col) VALUES ('a,d'), ('d,a'), ('a,d,a'), ('a,d,d'), ('d,a,d');
```

MySql中的ENUM是一个字符串对象，其值来自表创建时在列规定中显式枚举的一列值：

l 可以插入空字符串""和NULL（如果运行NULL的话）。

l 如果你将一个非法值插入ENUM(也就是说，允许的值列之外的字符串)，如果是严格模式，将不能插入，如果是非严格模式，将选用第一个元素代替，并警告。

l ENUM最多可以有65,535个成员，需要2个字节存储。

l 当创建表时，ENUM成员值的尾部空格将自动被删除。

l 例如：enum(‘M’,’F’)

值的索引规则如下：

l 来自列规定的允许的值列中的值从1开始编号。

l 空字符串错误值的索引值是0。

l NULL值的索引是NULL。

### 9、集合（SET）（了解）

SET和ENUM类型非常类似，也是一个字符串对象，里面包含0~64个成员。

SET和ENUM存储上有所不同，SET是根据成员的个数决定存储的字节数。

SET和ENUM最主要的区别在于SET类型一次可以选择多个成员，而ENUM则只能选择一个。

例如：set(‘a’,’b’,’c’,’d’)

### 10、特殊的NULL值

Java中只有引用数据类型才能赋值为null，mysql中所有类型都可以赋值为null。

Null特征：

（1）所有的类型的值都可以是null，包括int、float等数据类型

（2）空字符串””，不等于null，0也不等于null，false也不等于null

（3）**任何运算符,判断符碰到NULL,都得NULL**

（4）**NULL的判断只能用is null,is not null**

（5）NULL 影响查询速度,一般避免使值为NULL

### 面试

为什么建表时,加not null default '' 或 default 0

答:不想让表中出现null值.

为什么不想要的null的值

（1）不好比较,null是一种特殊值,比较时,只能用专门的is null 和 is not null来比较.

碰到运算符,一律返回null

（2）效率不高,影响提高索引效果.

因此,我们往往,在建表时 not null default '' 或 default 0